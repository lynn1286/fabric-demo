<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>åˆ›å»ºå­ç±»</title>
  </head>
  <script src="https://cdn.jsdelivr.net/npm/fabric"></script>
  <body>
    <canvas id="canvas" style="border: 1px solid #ccc"></canvas>
  </body>

  <script>
    const canvas = new fabric.Canvas('canvas', {
      width: 500,
      height: 500
    })

    // åˆ›å»º rect å­ç±»
    const MyRect = new fabric.util.createClass(fabric.Rect, {
      initialize(options) {
        // ä½¿ç”¨åŸæ–¹æ³•åŒ¯å…¥å±¬æ€§
        this.callSuper('initialize', options)
        // ä¸¦ä¸”çµ¦å®šé è¨­å€¼
        const def = {
          width: 100,
          height: 100,
          text: 'lynn',
          textColor: 'white'
        }
        Object.assign(this, def, options)
      },
      // æ›´æ”¹åŸæœ‰çš„ _render æ–¹æ³•
      _render(ctx) {
        this.callSuper('_render', ctx)
        ctx.font = '30px Arial'
        ctx.fillStyle = this.textColor
        ctx.textAlign = 'center'
        ctx.fillText(this.text, 0, 10)
      }
    })

    const rect = new MyRect()
    canvas.add(rect)

    console.log('ğŸš€ ~  : ', canvas.toJSON())
  </script>
</html>
